function toGetMapInfo(o){$.ajax({url:dataUrl,type:"post",data:{pageIndex:o},success:function(o){console.log(o),locationToExchangeToLongitudeAndLatitude(o,function(o){console.log(o),finalMapInfo=o,setNeighborhoods(o)})},fail:function(o){console.log(o)}})}function locationToExchangeToLongitudeAndLatitude(o,e){function t(){var i=o[a];showAddressLongitudeAndLatitude(i,function(o,i){a++,0!=o.length?a<r?(i.lat=o[0],i.lng=o[1],n.push(i),console.log(i),t()):e(n):a<r?t():e(n)})}var n=[],a=0,r=o.length;console.log(o),t()}function showAddressLongitudeAndLatitude(o,e){var t=[],n=locationMainUrl+o.locations+key;$.ajax({url:n,type:"get",data:{},success:function(n){console.log(n),"OK"==n.status?(t[0]=n.results[0].geometry.location.lat,t[1]=n.results[0].geometry.location.lng,e(t,o)):(t=[],console.log("zero"),e(t,o))},fail:function(n){t=[],e(t,o)}})}function setNeighborhoods(o){var e=0;for(neighborhoods=[];e<o.length;e++){var t={lat:o[e].lat,lng:o[e].lng};neighborhoods.push(t)}console.log(neighborhoods);var n=neighborhoods[0].lat,a=neighborhoods[0].lng;map=new google.maps.Map(document.getElementById("map"),{center:{lat:n,lng:a},zoom:5}),drop()}function drop(){clearMarkers();for(var o=0;o<neighborhoods.length;o++)addMarkerWithTimeout(neighborhoods[o],200*o,o)}function addMarkerWithTimeout(o,e,t){window.setTimeout(function(){var e=new google.maps.Marker({position:o,map:map,animation:google.maps.Animation.DROP,title:t.toString()});e.addListener("click",function(){moviesInfo(finalMapInfo[parseInt(this.title)])}),markers.push(e)},e)}function getImage(o){console.log(o),$.ajax({url:o,type:"get",data:{},success:function(o){console.log("movies info"),console.log(o),$(".showImage").attr("src",o.Poster)},fail:function(o){}})}function moviesInfo(o){var e=getPosterUrl+posterTitle+o.title+posterTime+o.release_year+getPosterType;console.log(e),console.log(o);var t="Title: "+o.title+"  Release Year: "+o.release_year,n="Actors: "+o.actor_1+" "+o.actor_2+" "+o.actor_3,a="Director: "+o.director,r="Locations: "+o.locations,i="Production Company: "+o.production_company,s="Writers: "+o.writer,l={source:[t,n,a,r,i,s]},c=template("modal-view",l);BootstrapDialog.alert({title:"SFMovies",message:c,type:BootstrapDialog.TYPE_DANGER,closable:!0,draggable:!0,buttonLabel:"close",callback:function(o){},onshow:function(o){},onshown:function(o){getImage(e)}})}function clearMarkers(){for(var o=0;o<markers.length;o++)markers[o].setMap(null);markers=[]}function initMap(){toGetMapInfo(currentPage)}var currentPage=0,locationMainUrl=" https://maps.googleapis.com/maps/api/geocode/json?address=",key="&key=AIzaSyDZNnVFox0iClcy-IiXPlf00qSvdUe5bjg",getPosterUrl="http://www.omdbapi.com/?",dataUrl="http://imaxli.com:3000/getSFMoviesMapInfo",posterTitle="t=",posterTime="&y=",getPosterType="&plot=short&r=json",map,finalMapInfo=[],map,neighborhoods=[],markers=[];